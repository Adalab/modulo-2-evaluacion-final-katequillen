"use strict";const input=document.querySelector(".js-search"),list=document.querySelector(".js-list"),form=document.querySelector(".js-form");let arraySeries=[];function getList(e){arraySeries=[];const t=input.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{e.forEach(e=>{arraySeries.push(e.show)}),generateList(arraySeries)})}function insertHTML(e){let t="";for(const s of e)null===s.image?t+=`<li id="${s.id} class="card favorite js-card">\n          <img class="image placeholder" src="https://via.placeholder.com/100x150/ffffff/666666/?text=TV" alt="series poster placeholder">${s.name}\n      </li>`:t+=`<li id="${s.id}" class="card favorite js-card">\n          <img class="image" src="${s.image.medium}" alt="series poster">${s.name}\n      </li>`;return t}function generateList(e){let t=insertHTML(e);list.innerHTML=t,cardListener()}function handleKeySearch(e){getList()}input.addEventListener("keyup",handleKeySearch);let favorites=[];function insertHTMLFav(e){let t="";for(const s of e)null==s.image?t+=`<li id="${s.id}" class="card favorite js-card-fav">\n          <img class="image" src="https://via.placeholder.com/100x150/ffffff/666666/?text=TV" alt="series poster placeholder">${s.name}\n      </li>`:t+=`<li id="${s.id}" class="card favorite js-card-fav">\n          <img class="image" src="${s.image.medium}" alt="series poster">${s.name}\n      </li>`;return t}function cardListener(){const e=document.querySelectorAll(".js-card");for(const t of e)t.addEventListener("click",faveList)}function faveList(e){const t=e.currentTarget;let s=e.currentTarget.id;const r=favorites.find(e=>e.id===parseInt(s));if(void 0===r){const e=arraySeries.find(e=>e.id===parseInt(s));favorites.push(e),t.classList.remove(".card"),t.classList.add(".clicked")}else{let e=favorites.indexOf(r);favorites.splice(e,1),t.classList.add(".card"),t.classList.remove(".clicked")}localStorage.setItem("series",JSON.stringify(favorites)),generateFaveList(favorites)}function generateFaveList(e){const t=document.querySelector(".js-favorites");let s=insertHTMLFav(e);t.innerHTML=s}favorites=JSON.parse(localStorage.getItem("series")),generateFaveList(favorites);